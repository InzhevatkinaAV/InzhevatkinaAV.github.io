(()=>{"use strict";const t=JSON.parse('{"part_1":{"type":1,"background":"bedroom.jpg","notification":"","name":"","text":"Даже самые необычные истории начинаются в самый обычный день.","choices":[],"next":"part_2"},"part_2":{"type":1,"background":"bedroom.jpg","notification":"","name":"","text":"И сегодня был тот день, когда история случилась с Кларой.","choices":[],"next":"part_2.1"},"part_2.1":{"type":1,"background":"bedroom.jpg","notification":"","name":"","text":"Клара - обычная девушка, которая переехала в обычный город месяц назад, чтобы осуществить свою мечту...","choices":[],"next":"part_3"},"part_3":{"type":2,"background":"bedroom.jpg","notification":"","character":"","isMainCharacter":"true","name":"Клара","text":"Я стану законодательницей моды!","choices":[],"next":"part_3.1"},"part_3.1":{"type":2,"background":"bedroom.jpg","notification":"","character":"","isMainCharacter":"true","name":"Клара","text":"Но сначала надо найти работу.","choices":[],"next":"part_3.2"},"part_3.2":{"type":2,"background":"bedroom.jpg","notification":"","character":"","isMainCharacter":"true","name":"Клара","text":"Снимать жилье на двадцатом этаже с красивыми видами круто, но дорого.","choices":[],"next":"part_4"},"part_4":{"type":2,"background":"bedroom.jpg","notification":"","character":"","isMainCharacter":"true","name":"Клара","text":"В общем, нужно устроиться на работу и сделать что-то ещё...","choices":[],"next":"part_4.1"},"part_4.1":{"type":2,"background":"bedroom.jpg","notification":"","character":"","isMainCharacter":"true","name":"Клара","text":"Выкинуть мусор!","choices":[],"next":"part_4.2"},"part_4.2":{"type":2,"background":"bedroom.jpg","notification":"","character":"","isMainCharacter":"true","name":"Клара","text":"Не хотелось бы пугать соседей, поэтому...","choices":[],"next":"part_5"},"part_5":{"type":3,"background":"wardrobe.jpg","notification":"Выберете образ, чтобы сходить выкинуть мусор","category":["hair","dress","top","bottom"],"hair":["hair_6.png","hair_2.png"],"makeup":[],"dress":["combi_1.png","combi_2.png","combi_3.png"],"top":["top_3.png","top_5.png","top_6.png","top_4.png","top_7.png"],"bottom":["bottom_3.png","bottom_4.png"],"next":"part_6"},"part_6":{"type":2,"background":"bedroom.jpg","notification":"","character":"","isMainCharacter":"true","name":"Клара","text":"Теперь я готова вынести мусор?","choices":["Думаю, да","Нет, всё же переоденутсь еще разок."],"next":["part_7","part_5"]},"part_7":{"type":1,"background":"street_with_car.jpg","notification":"","name":"Клара","text":"Я спустилась вниз, к подъезду и решительным шагом направилась к мусорным бакам.","choices":[],"next":"part_8"},"part_8":{"type":1,"background":"street_with_car.jpg","notification":"","name":"Клара","text":"Неожиданно я услышала голос позади себя...","choices":[],"next":"part_9"},"part_9":{"type":1,"background":"street_with_car.jpg","notification":"","name":"Мужской голос","text":"Извините, не подскажите, как пройти в библиотеку?","choices":[],"next":"part_10"},"part_10":{"type":1,"background":"street_with_car.jpg","notification":"","name":"","text":"Я обернулась так резко, что чуть не выронила мусор. И увидела его...","choices":[],"next":"part_10.1"},"part_10.1":{"type":2,"background":"street_with_car.jpg","notification":"","character":"muscular_man_2.png","isMainCharacter":"false","name":"","text":"","choices":[],"next":"part_11"},"part_11":{"type":2,"background":"street_with_car.jpg","notification":"","character":"muscular_man_2.png","isMainCharacter":"false","name":"Незнакомец","text":"Прошу прощения, не подскажите, где тут библиотека?","choices":["Налево, а затем прямо в лес 3 километра.","Я не знаю, никогда ей не пользовалась."],"next":["part_12","part_13"]},"part_12":{"type":2,"background":"street_with_car.jpg","notification":"","character":"url","isMainCharacter":"true","name":"Клара","text":"Налево, а затем прямо в лес 3 километра. Только не сворачивайте с тропинки, а то сами знаете...лес, колючки, дикие тигры.","choices":"","next":"part_14"},"part_13":{"type":2,"background":"url","notification":"","character":"","isMainCharacter":"true","name":"Клара","text":"Я не знаю, никогда ей не пользовалась.","choices":"","next":"part_14"},"part_14":{"type":2,"background":"street_with_car.jpg","notification":"","character":"muscular_man_2.png","isMainCharacter":"false","name":"Незнакомец","text":"Вы очаровательны, не хотите сегодня поужинать со мной? Ресторан \'Страстные страсти\', 19:00.","choices":"","next":"part_15"},"part_15":{"type":1,"background":"street_with_car.jpg","notification":"","name":"","text":"Не дождавшись ответа, таинственный незнакомец подошел к припаркованной рядом машине. Сел в нее и уехал.","choices":"","next":"part_16"},"part_16":{"type":1,"background":"street.jpg","notification":"","name":"","text":"Метким броском я выкинула мусор в бак и в раздумьях направилась к подъезду.","choices":"","next":"part_16.1"},"part_16.1":{"type":1,"background":"street.jpg","notification":"","name":"","text":"Интересное начало дня!","choices":"","next":"part_17"},"part_17":{"type":1,"background":"street.jpg","notification":"","name":"","text":"Из мыслей меня вырвало столкновение с парнем из соседней квартиры.","choices":"","next":"part_18"},"part_18":{"type":2,"background":"street.jpg","notification":"Некоторые выборы влияют на дальнейшее развитие истории.","character":"muscular_man_1.png","isMainCharacter":"false","name":"Джек","text":"Не хочешь сходить сегодня на концерт? У меня есть билеты в танцевальную зону.","choices":["Принять предложение.","Отказаться."],"next":["part_19","part_20"]},"part_19":{"type":2,"background":"street.jpg","notification":"Принятое решение отразиться на будущих событиях. Имейте это ввиду!","character":"url","isMainCharacter":"true","name":"Клара","text":"Лучшее предложение за весь день, я в деле!","choices":"","next":"part_21"},"part_20":{"type":2,"background":"street.jpg","notification":"Принятое решение отразиться на будущих событиях.","character":"url","isMainCharacter":"true","name":"Клара","text":"Не смогу, Джек, я сегодня занята.","choices":"","next":"part_25"},"part_21":{"type":2,"background":"street.jpg","notification":"","character":"muscular_man_1.png","isMainCharacter":"false","name":"Джек","text":"19:00, арена \'Розовые розы\'. Будет весело!","choices":"","next":"part_22"},"part_22":{"type":1,"background":"bedroom.jpg","notification":"","name":"Клара","text":"Я вернулась домой и начала готовиться к концерту с Джеком.","choices":"","next":"part_23"},"part_23":{"type":3,"background":"wardrobe.jpg","notification":"Нужно выбрать наряд и прическу для концерта. Не зря же я заканчивала парикмахерские курсы!","category":["hair","top","makeup","bottom"],"hair":["hair_1.png","hair_4.png","hair_6.png"],"makeup":["makeup_1.png","no"],"dress":[],"top":["top_1.png","top_2.png","top_6.png"],"bottom":["bottom_1.png","bottom_2.png","bottom_3.png"],"next":"part_24"},"part_24":{"type":2,"background":"bedroom.jpg","notification":"","character":"url","isMainCharacter":"true","name":"Клара","text":"Думаю, этот образ сногсшибателен.","choices":"","next":"final_1"},"part_25":{"type":2,"background":"street.jpg","notification":"","character":"muscular_man_1.png","isMainCharacter":"false","name":"Джек","text":"Ничего, тогда в другой раз, но я запомнил. Хорошего дня!","choices":"","next":"part_26"},"part_26":{"type":1,"background":"bedroom.jpg","notification":"","name":"Клара","text":"Я вернулась домой и решила, что...","choices":["Интересно, что за ресторан \'Страстные страсти\'? Пожалуй, звучит интригующе","Не пойду я никуда, какие еще \'Страстные страсти\', ну что за бред!"],"next":["part_27","part_29"]},"part_27":{"type":3,"background":"wardrobe.jpg","notification":"Нужно подобрать образ для ужина в ресторане. Не зря же я заканчивала парикмахерские курсы!","category":["hair","dress","makeup"],"hair":["hair_1.png","hair_2.png","hair_3.png","hair_4.png","hair_5.png","hair_6.png"],"makeup":["makeup_2.png","no"],"dress":["dress_1.png","dress_2.png","dress_3.png"],"top":[],"bottom":[],"next":"part_28"},"part_28":{"type":2,"background":"bedroom.jpg","notification":"","character":"url","isMainCharacter":"true","name":"Клара","text":"Думаю, этот образ сногсшибателен для похода в ресторан.","choices":"","next":"final_2"},"part_29":{"type":3,"background":"wardrobe.jpg","notification":"Я решила остаться дома и переодеться во что-то удобное для валяния на диване.","category":["top","bottom","dress"],"hair":[],"makeup":[],"dress":["combi_1.png","combi_3.png"],"top":["top_4.png","top_6.png","top_7.png"],"bottom":["bottom_3.png","bottom_4.png"],"next":"part_30"},"part_30":{"type":2,"background":"bedroom.jpg","notification":"","character":"url","isMainCharacter":"true","name":"Клара","text":"Думаю, этот образ сногсшибателен для лежания на диване.","choices":"","next":"final_3"},"final_1":{"type":1,"background":"bedroom.jpg","notification":"","name":"","text":"Пританцовывая я уже направилась к двери, как вдруг услышала стук в окно...","choices":"","next":"end"},"final_2":{"type":1,"background":"bedroom.jpg","notification":"","name":"","text":"Насвистывая песенку, я направилась к двери. Но вдруг услышала стук в окно...","choices":"","next":"end"},"final_3":{"type":1,"background":"bedroom.jpg","notification":"","name":"","text":"Я развалилась в кровати и закрыла глаза. Но вдруг услышала стук в окно...","choices":"","next":"end"},"end":{"type":0,"background":"bedroom.jpg","next":""}}');var e=document.querySelector(".sceene"),a=document.querySelector(".notification-text"),n=document.querySelector(".character"),r=document.querySelector(".character_body"),c=document.querySelector(".character_hair"),o=document.querySelector(".character_makeup"),i=document.querySelector(".character_dress"),s=document.querySelector(".character_top"),d=document.querySelector(".character_bottom"),p=document.querySelector(".character_body_minor"),h=document.querySelector(".message"),m=document.querySelector(".message_name"),u=h.querySelector(".message_text"),_=document.querySelector(".first-choice"),g=document.querySelector(".second-choice"),l=0,b=document.querySelector(".wardrobe"),x=document.querySelector(".wardrobe_hair"),L=document.querySelector(".wardrobe_makeup"),k=document.querySelector(".wardrobe_dress"),y=document.querySelector(".wardrobe_top"),v=document.querySelector(".wardrobe_bottom"),f=document.querySelector(".wardrobe_submit"),j={body:"body.png",hair:"hair_6.png",makeup:"",dress:"",top:"top_4.png",bottom:"bottom_3.png"},E=t.part_1;function C(t){t.classList.add("hidden"),document.addEventListener("click",S),document.addEventListener("touched",S)}function S(){switch(String(E.type)){case"1":e.style.backgroundImage="url(".concat(E.background,")"),E.notification&&(a.textContent=E.notification,a.classList.remove("hidden")),h.classList.add("message-in-center"),E.name&&(m.textContent=E.name,m.classList.remove("hidden")),E.text&&(u.textContent=E.text,u.classList.remove("hidden")),2===E.choices.length&&(_.textContent=E.choices[0],g.textContent=E.choices[1],_.classList.remove("hidden"),g.classList.remove("hidden"),_.addEventListener("click",q),g.addEventListener("click",w),_.addEventListener("touched",q),g.addEventListener("touched",w)),document.addEventListener("click",K),document.addEventListener("touched",K);break;case"2":e.style.backgroundImage="url(".concat(E.background,")"),E.notification&&(a.textContent=E.notification,a.classList.remove("hidden")),"true"===E.isMainCharacter?M():(p.src=E.character,p.classList.remove("hidden"),n.classList.remove("hidden")),E.name&&(m.textContent=E.name,m.classList.remove("hidden")),E.text&&(u.textContent=E.text,u.classList.remove("hidden")),2===E.choices.length&&(_.textContent=E.choices[0],g.textContent=E.choices[1],_.classList.remove("hidden"),g.classList.remove("hidden"),_.addEventListener("click",q),g.addEventListener("click",w),_.addEventListener("touched",q),g.addEventListener("touched",w)),document.addEventListener("click",K),document.addEventListener("touched",K);break;case"3":!function(){e.style.backgroundImage="url(".concat(E.background,")"),E.notification&&(a.textContent=E.notification,a.classList.remove("hidden")),M(),r.classList.add("center-position"),c.classList.add("center-position"),o.classList.add("center-position"),i.classList.add("center-position"),s.classList.add("center-position"),d.classList.add("center-position");for(var t=0;t<E.category.length;t++)switch(E.category[t]){case"hair":I(x,B);break;case"makeup":I(L,D);break;case"dress":I(k,F);break;case"top":I(y,G);break;case"bottom":I(v,H)}b.classList.remove("hidden"),f.classList.remove("hidden"),document.addEventListener("click",K),document.addEventListener("touched",K)}()}}function q(){l=0}function w(){l=1}function M(){r.src=j.body,c.src=j.hair,o.src=j.makeup,i.src=j.dress,s.src=j.top,d.src=j.bottom,n.classList.remove("hidden"),r.classList.remove("hidden"),c.classList.remove("hidden"),o.classList.remove("hidden"),i.classList.remove("hidden"),s.classList.remove("hidden"),d.classList.remove("hidden")}function I(t,e){t.classList.remove("hidden"),t.addEventListener("click",e),t.addEventListener("touched",e)}var A=0,J=0,N=0,O=0,z=0;function B(){j.hair=E.hair[++A%E.hair.length],c.src=j.hair}function D(){var t=E.makeup[++J%E.makeup.length];j.makeup="no"===t?"":t,o.src=j.makeup}function F(){j.dress=E.dress[++N%E.dress.length],j.top="",j.bottom="",o.src=j.dress}function G(){j.top=E.top[++O%E.top.length],s.src=j.top,""!==j.dress&&(j.bottom=E.bottom[++z%E.bottom.length],j.dress="")}function H(){j.bottom=E.bottom[++z%E.bottom.length],d.src=j.bottom,""!==j.dress&&(j.top=E.top[++O%E.top.length],j.dress="")}function K(e){!(3===E.type&&e.target===f&&"end"!==E.next||3!==E.type&&"end"!==E.next)||(_.classList.contains("hidden")||e.target!==_&&e.target!==g)&&!_.classList.contains("hidden")?E.next:(E=Array.isArray(E.next)?t[E.next[l]]:t[E.next],a.classList.add("hidden"),n.classList.add("hidden"),r.classList.add("hidden"),c.classList.add("hidden"),o.classList.add("hidden"),i.classList.add("hidden"),s.classList.add("hidden"),d.classList.add("hidden"),p.classList.add("hidden"),h.classList.remove("message-in-center"),m.classList.add("hidden"),u.classList.add("hidden"),_.classList.add("hidden"),g.classList.add("hidden"),_.removeEventListener("click",q),g.removeEventListener("click",w),_.removeEventListener("touched",q),g.removeEventListener("touched",w),l=0,b.classList.add("hidden"),x.classList.add("hidden"),L.classList.add("hidden"),k.classList.add("hidden"),y.classList.add("hidden"),v.classList.add("hidden"),f.classList.add("hidden"),A=0,J=0,N=0,O=0,z=0,x.removeEventListener("click",B),L.removeEventListener("click",D),k.removeEventListener("click",F),y.removeEventListener("click",G),v.removeEventListener("click",H),x.removeEventListener("touched",B),L.removeEventListener("touched",D),k.removeEventListener("touched",F),y.removeEventListener("touched",G),v.removeEventListener("touched",H),document.removeEventListener("click",K),document.removeEventListener("touched",K),S())}var P=document.querySelector(".start");P.addEventListener("click",(function(t){C(P)})),P.addEventListener("touched",(function(t){C(P)}))})();